---
title: 心智模型（前言）
categories:
  - 重学前端
date: 2020-06-09 00:04:32
tags:
---


## 心智模型

先来看一段代码

```js
const x = 1
const y = x
x = 2
console.log(y)
```

很简单的四行代码，这在每天的代码中只是微不足道的存在，但是看到这几行代码，并让他运行在我们的脑中，相信每个人都会有自己的见解，我们脑海中的代码运行环境就会反映我们的**心智模型**。



### 什么是心智模型？

再次回到上边提到的代码块中来，这次让它一步一步地运行在我们的脑海中，尝试去解释每一行的意思。

```js
const x = 1 
  // 声明一个变量x，并把1赋值给x

const y = x 
  // 声明一个变量y，并把x赋值给y
  // 然而这就结束了吗？X的值为10，最终将10赋值给y

x = 2
  // 将2赋值给x

console.log(y)
//打印y，y的值为10
```

这是我现在的一个想法，然而在以前，我可能会这么认为

```js
const x = 1 
  // 声明一个变量x，并把1赋值给x

const y = x 
  // 声明一个变量y，并将x指向y

x = 2
  // 将2赋值给x，x改变了，指向x的y也变成了2

console.log(y)
//打印y，y的值为2
```

看到其中的差别了吗？也许别人的脑海中可能又是另一个答案（可能是正确答案，但思考路程却不一样）。我认为的**心智模型就是思考代码运行的方式**，一个健壮的心智模型就是武学中的九阳神功，雄浑的内功会自内而外的散发出强者的气息。



### 写代码，快且慢

通常情况下，我们都会在以一种快速的方式去写代码，以此来面对繁多的业务需求。有了”快“，我们可以在deadline前完成任务；有了”快“，我们可以提早下班去做自己喜欢做的事。当然有了“快”，我们也更容易出现bug，比如以下例子。

```js
function getUserInfo(info) {
  if (!info.hasPermission) {
    throw new Error('no permission!');
  }
  let copy = {
    created: Date.now(),
    phone: info.phone,
    company: info.company,
    moreInfo: info.moreInfo,
  };
  copy.moreInfo.address = 'Copy of ' + original.moreInfo.address;
  return copy;
}
```

快速地浏览一遍，代码很简单，主要做了以下几件事:

+ 创建了一个获取用户信息的函数
+ 会去判断是否拥有权限
+ 复制一份信息返回

很显然，代码中还修改了源数据`info.moreInfo.address`的值，在“快”模式下，我们和容易会写出这样容易引起bug的代码，到最后，还是需要“慢”，以一种一步一步的运行方式来寻找bug。假如我能锻炼出一种不会写出这种代码的习惯（拥有一个健壮的心智模型），这必将会降低写出糟糕的代码的可能性。

作为博客的开篇，旨在希望今后能通过对整个javascript的词法、语义、运行时进行整理归纳，打造一个属于我自己的健壮的心智模型



